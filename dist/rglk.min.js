!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rglk=e():t.rglk=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return i(t,[{key:"classOf",value:function(t){return Object.prototype.toString.call(t).slice(8,-1)}},{key:"isObject",value:function(t){return"Object"===this.classOf(t)}},{key:"isFunction",value:function(t){return"Function"===this.classOf(t)}},{key:"isString",value:function(t){return"string"==typeof t||t instanceof String}},{key:"random",value:function(t,e){return t=isNaN(t)?1:t,e=isNaN(e)?0:e,Math.random()*(t-e)+e}},{key:"randomInt",value:function(t,e){return Math.round(this.random(t,e))}},{key:"lerp",value:function(t,e,n){return(1-n)*t+n*e}},{key:"toRadian",value:function(t){return t*Math.PI/180}},{key:"toDegree",value:function(t){return 180*t/Math.PI}},{key:"generateID",value:function(t){t=!isNaN(t)&&t>0?t:8;for(var e="";e.length<t;)e+=Math.random().toString(16).slice(2);return e.slice(0,t)}},{key:"arrayGetRandom",value:function(t){return Array.isArray(t)?t.length?t[Math.round(this.random(0,t.length-1))]:null:void console.warn("Helper.arrayGetRandom: argument "+t+" is not a Array")}},{key:"arrayRandomize",value:function(t){if(!Array.isArray(t))return console.warn("Helper.arrayRandomize: argument "+t+" is not a Array"),t;var e=t.slice();return e.sort(function(){return Math.random()>=.5?1:-1}),e}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,n){r(this,t),this._x=isNaN(e)?0:e,this._y=isNaN(e)?0:n}return i(t,[{key:"distance",value:function(t){return Math.sqrt(Math.pow(t.x-this.x,2)+Math.pow(t.y-this.y,2))}},{key:"x",get:function(){return this._x},set:function(t){isNaN(t)?console.warn("Point2.x: value "+t+" is NaN"):this._x=t}},{key:"y",get:function(){return this._y},set:function(t){isNaN(t)?console.warn("Point2.y: value "+t+" is NaN"):this._y=t}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this._seed=isNaN(e)?12345:e}return i(t,[{key:"getRandom",value:function(t,e){return e=isNaN(e)?1:e,t=isNaN(t)?0:t,this._seed=(9301*this._seed+49297)%233280,t+this._seed/233280*(e-t)}},{key:"seed",get:function(){return this._seed},set:function(t){isNaN(t)?console.warn("PRNG.seed: value "+t+" is NaN"):this._seed=t}}]),t}();e.default=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),a=r(u),s=n(7),f=r(s),c=n(0),l=(r(c),n(2)),h=r(l),y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this._options={seed:isNaN(e.seed)?0:e.seed,roomAmount:isNaN(e.roomAmount)?1:e.roomAmount,roomMinSize:isNaN(e.roomMinSize)?5:e.roomMinSize,roomMaxSize:isNaN(e.roomMaxSize)?5:e.roomMaxSize,corridorMinLength:isNaN(e.corridorMinLength)?1:e.corridorMinLength,corridorMaxLength:isNaN(e.corridorMaxLength)?1:e.corridorMaxLength},this._tiles=[],this._rooms=[],this._corridors=[],this._prng=new h.default(this._options.seed)}return o(t,[{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=isNaN(t.seed)?this._options.seed:t.seed,n=isNaN(t.roomAmount)?this._options.roomAmount:t.roomAmount,r=isNaN(t.roomMinSize)?this._options.roomMinSize:t.roomMinSize,i=isNaN(t.roomMaxSize)?this._options.roomMaxSize:t.roomMaxSize,o=isNaN(t.corridorMinLength)?this._options.corridorMinLength:t.corridorMinLength,u=isNaN(t.corridorMaxLength)?this._options.corridorMaxLength:t.corridorMaxLength;this._prng=new h.default(e),this._options={seed:e,roomAmount:n,roomMinSize:r,roomMaxSize:i,corridorMinLength:o,corridorMaxLength:u}}},{key:"forEachTile",value:function(t){if(t instanceof Function)for(var e=0;e<this._tiles.length;e++)for(var n=0;n<this._tiles[e].length;n++)t instanceof Function&&t(n,e,this._tiles[e][n])}},{key:"isWall",value:function(t,e){if(void 0!==this._tiles[e]&&void 0!==this._tiles[e][t])return!this._tiles[e][t]}},{key:"generate",value:function(){this._correctOptions(),this._generateBuilds(),this._optimizeBuilds(),this._createMap()}},{key:"_correctOptions",value:function(){this._options.roomAmount<1&&(this._options.roomAmount=1),this._options.roomMinSize<1&&(this._options.roomMinSize=1),this._options.roomMaxSize<1&&(this._options.roomMaxSize=1),this._options.corridorMinLength<1&&(this._options.corridorMinLength=1),this._options.corridorMaxLength<1&&(this._options.corridorMaxLength=1)}},{key:"_generateBuilds",value:function(){var t=this,e=function(e,n){return Math.round(t._prng.getRandom(n,e))},n=this._options.roomAmount,r=this._options.roomMinSize,i=this._options.roomMaxSize,o=this._options.corridorMinLength,u=this._options.corridorMaxLength;for(this._rooms=[],this._corridors=[],this._rooms.push(new f.default(1,1,e(r,i),e(r,i)));this._rooms.length<n;){var a=e(0,this._rooms.length-1),s=this._rooms[a],c=e(r,i),l=e(r,i),h=new f.default(0,0,c,l),y=e(o,u),d=new f.default(0,0,1,1),p=e(0,3),_=!1,g=h.width-s.width,v=h.height-s.height;0===p||2===p?(h.y=s.y-e(0,v),d.y=e(Math.max(s.top,h.top),Math.min(s.bottom,h.bottom)),d.width=y):(h.x=s.x-e(0,g),d.height=y,d.x=e(Math.max(s.left,h.left),Math.min(s.right,h.right))),0===p?(h.x=s.right+y+1,d.x=s.right+1):1===p?(h.y=s.bottom+y+1,d.y=s.bottom+1):2===p?(h.x=s.left-y-h.width,d.x=s.left-d.width):(h.y=s.top-y-h.height,d.y=s.top-d.height);for(var m=0;m<this._rooms.length;m++){if(h.collides(this._rooms[m])){_=!0;break}if(d.collides(this._rooms[m])&&a!==m){_=!0;break}}for(var b=0;b<this._corridors.length;b++)if(h.collides(this._corridors[b])){_=!0;break}_||(this._rooms.push(h),this._corridors.push(d))}}},{key:"_optimizeBuilds",value:function(){var t=this._getTopLeft();t.x<1&&this._translateBuilds(1-t.x,0),t.y<1&&this._translateBuilds(0,1-t.y)}},{key:"_getTopLeft",value:function(){var t=new a.default(1/0,1/0);return this.builds.forEach(function(e){e.x<t.x&&(t.x=e.x),e.y<t.y&&(t.y=e.y)}),t}},{key:"_getBottomRight",value:function(){var t=new a.default(-1/0,-1/0);return this.builds.forEach(function(e){e.right>t.x&&(t.x=e.right),e.bottom>t.y&&(t.y=e.bottom)}),t}},{key:"_translateBuilds",value:function(t,e){this.builds.forEach(function(n){n.x+=t,n.y+=e})}},{key:"_createMap",value:function(){var t=this,e=this._getBottomRight();this._fillMap(e.x+2,e.y+2),this.builds.forEach(function(e){t._fillRectangle(e.x,e.y,e.width,e.height)})}},{key:"_fillMap",value:function(t,e){this._tiles=[];for(var n=0;n<e;n++){this._tiles.push([]);for(var r=0;r<t;r++)this._tiles[n].push(!1)}}},{key:"_fillRectangle",value:function(t,e,n,r){for(var i=e;i<=e+r-1;i++)for(var o=t;o<=t+n-1;o++)this._tiles[i][o]=!0}},{key:"rooms",get:function(){return this._rooms}},{key:"corridors",get:function(){return this._corridors}},{key:"builds",get:function(){return this._rooms.concat(this._corridors)}},{key:"width",get:function(){return Array.isArray(this._tiles[0])?this._tiles[0].length:0}},{key:"height",get:function(){return this._tiles.length}},{key:"options",get:function(){return this._options}}]),t}();t.exports=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),a=r(u),s=n(0),f=r(s),c=function(){function t(e){if(i(this,t),!(new f.default).isFunction(e))return console.warn("Pathfinder: argument "+e+" is not a Function"),void(this._isTransparent=function(){return null});this._isTransparent=e}return o(t,[{key:"_line",value:function(t,e){for(var n=e.x-t.x,r=e.y-t.y,i=Math.abs(n),o=Math.abs(r),u=n>0?1:-1,s=r>0?1:-1,f=new a.default(t.x,t.y),c=[new a.default(f.x,f.y)],l=0,h=0;l<i||h<o;)(.5+l)/i==(.5+h)/o?(f.x+=u,f.y+=s,l++,h++):(.5+l)/i<(.5+h)/o?(f.x+=u,l++):(f.y+=s,h++),c.push(new a.default(f.x,f.y));return c}},{key:"calculate",value:function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n))return console.warn("Explorer.calculate: arguments "+n+" must be a Number");if(!(new f.default).isFunction(r))return console.warn("Explorer.calculate: argument "+r+" is not a Function");for(var i=Math.pow(n,2),o=new a.default(t,e),u=o.x-n,s=o.x+n,c=o.y-n,l=o.y+n,h=c;h<=l;h++)for(var y=u;y<=s;y++)if(h===c||h===l||y===u||y===s)for(var d=this._line(o,new a.default(y,h)),p=0;p<d.length;p++){var _=d[p],g=Math.pow(o.x-_.x,2)+Math.pow(o.y-_.y,2);if(!(g<=i))break;if(!this._isTransparent(_.x,_.y))break;r(_.x,_.y)}}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),a=(r(u),n(6)),s=r(a),f=n(0),c=r(f),l=function(){function t(e){if(i(this,t),!(new c.default).isFunction(e))return console.warn("Pathfinder: value "+e+" is not a Function"),void(this._isWalkable=function(){return null});this._isWalkable=e}return o(t,[{key:"_heuristic",value:function(t,e,n,r){return Math.abs(n-t)+Math.abs(r-e)}},{key:"_findNode",value:function(t,e){if(e instanceof s.default)for(var n=0;n<t.length;n++)if(t[n].x===e.x&&t[n].y===e.y)return n}},{key:"_getNeighbors",value:function(t){for(var e=[],n=t.y-1;n<=t.y+1;n++)for(var r=t.x-1;r<=t.x+1;r++)(r===t.x&&n!=t.y||r!=t.x&&n===t.y)&&this._isWalkable(r,n)&&e.push(new s.default({x:r,y:n,g:t.g+1,parent:t}));return e}},{key:"search",value:function(t,e,n,r){for(var i=new s.default({x:t,y:e}),o=new s.default({x:n,y:r}),u=[i],a=[];u.length>0;){var f=0,c=u[0];if(u.forEach(function(t,e){t.f<c.f&&(c=t,f=e)}),u.splice(f,1),a.push(c),c.x===o.x&&c.y===o.y){for(var l=c,h=[];l.parent;)h.push(l),l=l.parent;return h.reverse()}for(var y=this._getNeighbors(c),d=0;d<y.length;d++){var p=y[d];this._findNode(a,p)||(this._findNode(u,p)||(p.h=this._heuristic(p.x,p.y,o.x,o.y),u.push(p)))}}return[]}}]),t}();e.default=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=function(t){return t&&t.__esModule?t:{default:t}}(a),f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.x,t.y));return n._g=isNaN(t.g)?0:t.g,n._h=isNaN(t.h)?0:t.h,n._parent=t.parent instanceof e?t.parent:null,n}return o(e,t),u(e,[{key:"g",get:function(){return this._g},set:function(t){isNaN(t)?console.warn("Node2.g: value "+t+" is NaN"):this._g=t}},{key:"h",get:function(){return this._h},set:function(t){isNaN(t)?console.warn("Node2.h: value "+t+" is NaN"):this._h=t}},{key:"parent",get:function(){return this._parent},set:function(t){t instanceof e?this._parent=t:console.warn("Node2.parent: value "+t+" is not a Node2")}},{key:"f",get:function(){return this.g+this.h}}]),e}(s.default);e.default=f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=function(t){return t&&t.__esModule?t:{default:t}}(a),f=function(t){function e(t,n,o,u){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return a._width=isNaN(o)?1:o,a._height=isNaN(u)?1:u,a}return o(e,t),u(e,[{key:"collides",value:function(t){return!(t.left>this.left+this.width||t.left+t.width<this.left||t.top>this.top+this.height||t.top+t.height<this.top)}},{key:"x",get:function(){return this._x},set:function(t){isNaN(t)||(this._x=t)}},{key:"y",get:function(){return this._y},set:function(t){isNaN(t)||(this._y=t)}},{key:"width",get:function(){return this._width},set:function(t){isNaN(t)||(this._width=t)}},{key:"height",get:function(){return this._height},set:function(t){isNaN(t)||(this._height=t)}},{key:"top",get:function(){return this._y}},{key:"right",get:function(){return this._x+this._width-1}},{key:"bottom",get:function(){return this._y+this._height-1}},{key:"left",get:function(){return this._x}}]),e}(s.default);e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(0),a=r(u),s=n(3),f=r(s),c=n(5),l=r(c),h=n(4),y=r(h),d=n(2),p=r(d),_=function(){function t(){i(this,t),this._utils=new a.default,this._Dungeon=f.default,this._Explorer=y.default,this._Pathfinder=l.default,this._PRNG=p.default}return o(t,[{key:"utils",get:function(){return this._utils}},{key:"Dungeon",get:function(){return this._Dungeon}},{key:"Explorer",get:function(){return this._Explorer}},{key:"Pathfinder",get:function(){return this._Pathfinder}},{key:"PRNG",get:function(){return this._PRNG}}]),t}();t.exports=new _}])});