!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rglk=t():e.rglk=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this._x=isNaN(t)?0:t,this._y=isNaN(t)?0:n}return i(e,[{key:"distance",value:function(e){return Math.sqrt(Math.pow(e.x-this.x,2)+Math.pow(e.y-this.y,2))}},{key:"x",get:function(){return this._x},set:function(e){isNaN(e)?console.warn("Point2.x: value "+e+" is NaN"):this._x=e}},{key:"y",get:function(){return this._y},set:function(e){isNaN(e)?console.warn("Point2.y: value "+e+" is NaN"):this._y=e}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"classOf",value:function(e){return Object.prototype.toString.call(e).slice(8,-1)}},{key:"isObject",value:function(e){return"Object"===this.classOf(e)}},{key:"isFunction",value:function(e){return"Function"===this.classOf(e)}},{key:"isString",value:function(e){return"string"==typeof e||e instanceof String}},{key:"random",value:function(e,t){return e=isNaN(e)?1:e,t=isNaN(t)?0:t,Math.random()*(e-t)+t}},{key:"randomInt",value:function(e,t){return Math.round(this.random(e,t))}},{key:"lerp",value:function(e,t,n){return(1-n)*e+n*t}},{key:"toRadian",value:function(e){return e*Math.PI/180}},{key:"toDegree",value:function(e){return 180*e/Math.PI}},{key:"generateID",value:function(e){e=!isNaN(e)&&e>0?e:8;for(var t="";t.length<e;)t+=Math.random().toString(16).slice(2);return t.slice(0,e)}},{key:"arrayGetRandom",value:function(e){return Array.isArray(e)?e.length?e[Math.round(this.random(0,e.length-1))]:null:void console.warn("Helper.arrayGetRandom: argument "+e+" is not a Array")}},{key:"arrayRandomize",value:function(e){if(!Array.isArray(e))return console.warn("Helper.arrayRandomize: argument "+e+" is not a Array"),e;var t=e.slice();return t.sort(function(){return Math.random()>=.5?1:-1}),t}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._seed=isNaN(t)?12345:t}return i(e,[{key:"getRandom",value:function(e,t){return t=isNaN(t)?1:t,e=isNaN(e)?0:e,this._seed=(9301*this._seed+49297)%233280,e+this._seed/233280*(t-e)}},{key:"seed",get:function(){return this._seed},set:function(e){isNaN(e)?console.warn("PRNG.seed: value "+e+" is NaN"):this._seed=e}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),s=n(8),f=r(s),c=n(1),l=(r(c),n(2)),h=r(l),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this._options={seed:isNaN(t.seed)?0:t.seed,roomMinSize:isNaN(t.roomMinSize)?5:t.roomMinSize,roomMaxSize:isNaN(t.roomMaxSize)?5:t.roomMaxSize,roomAmount:isNaN(t.roomAmount)?1:t.roomAmount,density:isNaN(t.density)?1:t.density},this._tiles=[[]],this.prng=new h.default(this._options.seed)}return o(e,[{key:"updateOptions",value:function(e){var t={seed:isNaN(e.seed)?this._options.seed:e.seed,roomMinSize:isNaN(e.roomMinSize)?this._options.roomMinSize:e.roomMinSize,roomMaxSize:isNaN(e.roomMaxSize)?this._options.roomMaxSize:e.roomMaxSize,roomAmount:isNaN(e.roomAmount)?this._options.roomAmount:e.roomAmount,density:isNaN(e.density)?this._options.density:e.density};this._options=t,this.prng=new h.default(this._options.seed)}},{key:"generate",value:function(e){this._createRooms(),this._optimizeRooms(),this._createMap(),this.forEachTile(e)}},{key:"forEachTile",value:function(e){if(e instanceof Function)for(var t=0;t<this._tiles.length;t++)for(var n=0;n<this._tiles[t].length;n++)e instanceof Function&&e(n,t,this._tiles[t][n])}},{key:"isWall",value:function(e,t){if(void 0!=this._tiles[t]&&void 0!=this._tiles[t][e])return!this._tiles[t][e]}},{key:"_createRooms",value:function(){var e=this,t=function(t,n){return Math.round(e.prng.getRandom(t,n))},n=this._options.density,r=this._options.roomAmount,i=this._options.roomMinSize,o=this._options.roomMaxSize,a=new f.default(1,1,t(i,o),t(i,o));for(this.rooms=[a],n>1?n=1:n<0&&(n=0);this.rooms.length!=r;){var u=this.rooms[t(0,this.rooms.length-1)],s=t(i,o),c=t(i,o),l=1+Math.floor(u.width/2+s/2),h=1+Math.floor(u.height/2+c/2),y=Math.floor(l*(2-n)),d=Math.floor(h*(2-n)),p=new f.default(0,0,s,c),_=t(0,3),v=!1,g=Math.round((p.width-u.width)/2),b=Math.round((p.height-u.height)/2);switch(p.x=u.x-g,p.y=u.y-b,_){case 0:p.x-=t(l,y);break;case 1:p.y+=t(h,d);break;case 2:p.x+=t(l,y);break;case 3:p.y-=t(h,d)}for(var m=0;m<this.rooms.length;m++)if(p.intersects(this.rooms[m])){v=!0;break}v||(p.parent=u,this.rooms.push(p))}}},{key:"_optimizeRooms",value:function(){var e=this._getTopLeft();e.x<1&&this._translateRooms(1-e.x,0),e.y<1&&this._translateRooms(0,1-e.y)}},{key:"_translateRooms",value:function(e,t){this.rooms.forEach(function(n){n.x+=e,n.y+=t})}},{key:"_getTopLeft",value:function(){var e=new u.default(1/0,1/0);return this.rooms.forEach(function(t){t.x<e.x&&(e.x=t.x),t.y<e.y&&(e.y=t.y)}),e}},{key:"_getBottomRight",value:function(){var e=new u.default(-1/0,-1/0);return this.rooms.forEach(function(t){t.x+t.width>e.x&&(e.x=t.x+t.width),t.y+t.height>e.y&&(e.y=t.y+t.height)}),e}},{key:"_createMap",value:function(){var e=this._getBottomRight();this._fillMap(e.x+1,e.y+1),this._buildRooms(),this._buildCorridors()}},{key:"_fillMap",value:function(e,t){this._tiles=[];for(var n=0;n<t;n++){this._tiles.push([]);for(var r=0;r<e;r++)this._tiles[n].push(!1)}}},{key:"_buildRooms",value:function(){this.rooms.forEach(function(e){this._fillRect(e.x,e.y,e.width,e.height)}.bind(this))}},{key:"_buildCorridors",value:function(){this.rooms.forEach(function(e){e.parent&&(this._fillRect(Math.min(e.center.x,e.parent.center.x),e.center.y,Math.abs(e.center.x-e.parent.center.x)+1,1),this._fillRect(e.parent.center.x,Math.min(e.center.y,e.parent.center.y),1,Math.abs(e.center.y-e.parent.center.y)+1))}.bind(this))}},{key:"_fillRect",value:function(e,t,n,r){for(var i=t;i<=t+r-1;i++)for(var o=e;o<=e+n-1;o++)this._tiles[i][o]=!0}},{key:"width",get:function(){return this._tiles[0].length||0}},{key:"height",get:function(){return this._tiles.length||0}},{key:"options",get:function(){return this._options}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=r(a),s=n(1),f=r(s),c=function(){function e(t){if(i(this,e),!(new f.default).isFunction(t))return console.warn("Pathfinder: argument "+t+" is not a Function"),void(this._isTransparent=function(){return null});this._isTransparent=t}return o(e,[{key:"_line",value:function(e,t){for(var n=t.x-e.x,r=t.y-e.y,i=Math.abs(n),o=Math.abs(r),a=n>0?1:-1,s=r>0?1:-1,f=new u.default(e.x,e.y),c=[new u.default(f.x,f.y)],l=0,h=0;l<i||h<o;)(.5+l)/i==(.5+h)/o?(f.x+=a,f.y+=s,l++,h++):(.5+l)/i<(.5+h)/o?(f.x+=a,l++):(f.y+=s,h++),c.push(new u.default(f.x,f.y));return c}},{key:"calculate",value:function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return console.warn("Explorer.calculate: arguments "+n+" must be a Number");if(!(new f.default).isFunction(r))return console.warn("Explorer.calculate: argument "+r+" is not a Function");for(var i=Math.pow(n,2),o=new u.default(e,t),a=o.x-n,s=o.x+n,c=o.y-n,l=o.y+n,h=c;h<=l;h++)for(var y=a;y<=s;y++)if(h===c||h===l||y===a||y===s)for(var d=this._line(o,new u.default(y,h)),p=0;p<d.length;p++){var _=d[p],v=Math.pow(o.x-_.x,2)+Math.pow(o.y-_.y,2);if(!(v<=i))break;if(!this._isTransparent(_.x,_.y))break;r(_.x,_.y)}}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=(r(a),n(6)),s=r(u),f=n(1),c=r(f),l=function(){function e(t){if(i(this,e),!(new c.default).isFunction(t))return console.warn("Pathfinder: value "+t+" is not a Function"),void(this._isWalkable=function(){return null});this._isWalkable=t}return o(e,[{key:"_heuristic",value:function(e,t,n,r){return Math.abs(n-e)+Math.abs(r-t)}},{key:"_findNode",value:function(e,t){if(t instanceof s.default)for(var n=0;n<e.length;n++)if(e[n].x===t.x&&e[n].y===t.y)return n}},{key:"_getNeighbors",value:function(e){for(var t=[],n=e.y-1;n<=e.y+1;n++)for(var r=e.x-1;r<=e.x+1;r++)(r===e.x&&n!=e.y||r!=e.x&&n===e.y)&&this._isWalkable(r,n)&&t.push(new s.default({x:r,y:n,g:e.g+1,parent:e}));return t}},{key:"search",value:function(e,t,n,r){for(var i=new s.default({x:e,y:t}),o=new s.default({x:n,y:r}),a=[i],u=[];a.length>0;){var f=0,c=a[0];if(a.forEach(function(e,t){e.f<c.f&&(c=e,f=t)}),a.splice(f,1),u.push(c),c.x===o.x&&c.y===o.y){for(var l=c,h=[];l.parent;)h.push(l),l=l.parent;return h.reverse()}for(var y=this._getNeighbors(c),d=0;d<y.length;d++){var p=y[d];this._findNode(u,p)||(this._findNode(a,p)||(p.h=this._heuristic(p.x,p.y,o.x,o.y),a.push(p)))}}return[]}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.x,e.y));return n._g=isNaN(e.g)?0:e.g,n._h=isNaN(e.h)?0:e.h,n._parent=e.parent instanceof t?e.parent:null,n}return o(t,e),a(t,[{key:"g",get:function(){return this._g},set:function(e){isNaN(e)?console.warn("Node2.g: value "+e+" is NaN"):this._g=e}},{key:"h",get:function(){return this._h},set:function(e){isNaN(e)?console.warn("Node2.h: value "+e+" is NaN"):this._h=e}},{key:"parent",get:function(){return this._parent},set:function(e){e instanceof t?this._parent=e:console.warn("Node2.parent: value "+e+" is not a Node2")}},{key:"f",get:function(){return this.g+this.h}}]),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),s=n(3),f=r(s),c=n(5),l=r(c),h=n(4),y=r(h),d=n(2),p=r(d),_=function(){function e(){i(this,e),this._utils=new u.default,this._Dungeon=f.default,this._Explorer=y.default,this._Pathfinder=l.default,this._PRNG=p.default}return o(e,[{key:"utils",get:function(){return this._utils}},{key:"Dungeon",get:function(){return this._Dungeon}},{key:"Explorer",get:function(){return this._Explorer}},{key:"Pathfinder",get:function(){return this._Pathfinder}},{key:"PRNG",get:function(){return this._PRNG}}]),e}();e.exports=new _},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(e,n,o,a){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return u._width=isNaN(o)?5:o,u._height=isNaN(a)?5:a,u}return o(t,e),a(t,[{key:"intersects",value:function(e){return!(e.x>this.x+this.width||e.x+e.width<this.x||e.y>this.y+this.height||e.y+e.height<this.y)}},{key:"width",get:function(){return this._width},set:function(e){isNaN(e)?console.warn("Room.width: value "+e+" is NaN"):this._width=e}},{key:"height",get:function(){return this._height},set:function(e){isNaN(e)?console.warn("Room.height: value "+e+" is NaN"):this._height=e}},{key:"center",get:function(){return new s.default(Math.floor(this.x+this.width/2),Math.floor(this.y+this.height/2))}}]),t}(s.default);t.default=f}])});